<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>${title}</title>
        <link rel="stylesheet" type="text/css" href="swagger-ui.css" >
        <link rel="stylesheet" type="text/css" href="${themeHref}" >

        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <link rel="stylesheet" type="text/css" href="${styleHref}" >
    </head>

    <body>
        <div id="swagger-ui"></div>
        <footer id="footer">${footer}</footer>
        <script src="swagger-ui-bundle.js" charset="UTF-8"></script>
        <script src="swagger-ui-standalone-preset.js" charset="UTF-8"> </script>
        <script>

            window.onload = function() {
                
                const ui = {
                    ${urlSection},
                    dom_id: '${domId}',
                    deepLinking: ${deepLinking},
                    displayOperationId: ${displayOperationId},
                    defaultModelsExpandDepth: ${defaultModelsExpandDepth},
                    defaultModelExpandDepth: ${defaultModelExpandDepth},
                    defaultModelRendering: '${defaultModelRendering}',
                    displayRequestDuration: ${displayRequestDuration},
                    docExpansion: '${docExpansion}',
                    filter: ${filter},
                    maxDisplayedTags: ${maxDisplayedTags},
                    operationsSorter: ${operationsSorter},
                    showExtensions: ${showExtensions},
                    showCommonExtensions: ${showCommonExtensions},
                    tagsSorter: ${tagsSorter},
                    onComplete: ${onComplete},
                    syntaxHighlight: ${syntaxHighlight},
                    requestInterceptor: ${requestInterceptor},
                    request.curlOptions: ${requestCurlOptions},
                    responseInterceptor: ${responseInterceptor},
                    showMutatedRequest: '${showMutatedRequest}',
                    supportedSubmitMethods: ${supportedSubmitMethods},
                    validatorUrl: '${validatorUrl}',
                    withCredentials: ${withCredentials},
                    modelPropertyMacro: '${modelPropertyMacro}',
                    parameterMacro: '${parameterMacro}',
                    persistAuthorization: ${persistAuthorization},
                    presets: ${presets},
                    plugins: ${plugins},
                    layout: '${layout}',
                    ${preauthorizeSection}
                };
                
                // If Url is relative, append the host and port
                var oar = "${oauth2RedirectUrl}";
                if(oar.startsWith("/")){
                    oar = window.location.protocol + "//" + window.location.hostname + ":" + window.location.port + oar;
                    ui.oauth2RedirectUrl = oar;
                }else if(oar !== "-"){
                    ui.oauth2RedirectUrl = oar;
                }
                
                window.ui = SwaggerUIBundle(ui)

                ${initOAuthSection}

                document.getElementsByClassName("link")[0].innerHTML = "<a href='${selfHref}'><img src='${logoHref}' alt='${title}' height='44' align='middle'></a>";
            }
        </script>
    </body>
</html>
